{% extends "base.html" %}
{% block content %}
<div style="max-width:600px; margin:20px auto; padding:0 15px;">
    <h2>üìß Share Vehicle</h2>
    
    {% if vehicle.image_url %}
    <img src="{{ vehicle.image_url }}" style="width:100%; border-radius:10px; margin-bottom:10px;">
    {% endif %}
    <p style="font-size:18px; font-weight:600; margin:5px 0;">{{ vehicle.year }} {{ vehicle.make }} {{ vehicle.model }} {{ vehicle.trim or '' }}</p>
    <p style="color:#6C2BD9; font-size:20px; font-weight:bold; margin:5px 0;">${{ "{:,.0f}".format(vehicle.price) }}</p>

    <form method="POST" style="margin-top:20px;">
        {% if customers %}
        <div style="border:1px solid #ddd; border-radius:10px; padding:15px; margin-bottom:15px; background:#f9f9f9;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                <label style="font-size:14px; font-weight:600; color:#333;">My Customers</label>
                <label style="font-size:13px; color:#6C2BD9; cursor:pointer;">
                    <input type="checkbox" id="selectAll" onclick="toggleAll()" style="margin-right:4px;">Select All ({{ customers|length }})
                </label>
            </div>
            <div style="max-height:200px; overflow-y:auto;">
            {% for c in customers %}
            <label style="display:flex; align-items:center; padding:8px 0; border-bottom:1px solid #eee; cursor:pointer;">
                <input type="checkbox" name="customer_ids" value="{{ c.id }}" class="cust-check" style="margin-right:10px; width:18px; height:18px;">
                <div>
                    <span style="font-weight:500;">{{ c.name }}</span>
                    <span style="color:#999; font-size:12px; margin-left:5px;">{{ c.email }}</span>
                </div>
            </label>
            {% endfor %}
            </div>
        </div>
        {% endif %}

        <label style="font-size:14px; color:#666; font-weight:600;">Additional Email Addresses</label>
        <textarea name="emails" rows="3" placeholder="Add more emails separated by commas&#10;john@email.com, jane@email.com" 
            style="width:100%; padding:12px; border:1px solid #ddd; border-radius:8px; font-size:15px; box-sizing:border-box; margin-top:5px; font-family:Arial;"></textarea>
        
        <label style="font-size:14px; color:#666; font-weight:600; display:block; margin-top:15px;">Personal Message (optional)</label>
        <textarea name="message" rows="3" placeholder="Hey, check out this car I have for you!"
            style="width:100%; padding:12px; border:1px solid #ddd; border-radius:8px; font-size:15px; box-sizing:border-box; margin-top:5px; font-family:Arial;"></textarea>

        <button type="submit" style="width:100%; padding:14px; background:#6C2BD9; color:white; border:none; border-radius:10px; font-size:16px; font-weight:600; cursor:pointer; margin-top:20px;">üìß Send to All</button>
    </form>

    <a href="/{{ sp.profile_url_slug }}" style="display:block; text-align:center; margin-top:15px; color:#666;">‚Üê Back to storefront</a>
</div>

<script>
function toggleAll() {
    var checked = document.getElementById('selectAll').checked;
    document.querySelectorAll('.cust-check').forEach(function(cb) { cb.checked = checked; });
}
</script>
{% endblock %}
